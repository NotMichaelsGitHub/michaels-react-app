{"version":3,"file":"index.umd.js","sources":["../src/ChartContext.tsx","../src/utils.ts","../src/hooks/useChartContext.ts","../src/components/XAxis.tsx","../src/components/YAxis.tsx","../src/hooks/useTooltipGenerator.ts","../src/components/BarSeries.tsx","../src/components/Arc.tsx","../src/components/ArcSeries.tsx","../src/components/Y0.tsx","../src/components/CircleSeries.tsx","../src/components/LineSeries.tsx","../src/components/Tooltip.tsx","../src/components/ChartProvider.tsx","../src/components/AreaSeries.tsx"],"sourcesContent":["import { RoughOptions } from 'react-roughjs'\nimport { ScaleBand, ScaleLinear } from 'd3-scale'\nimport * as React from 'react'\n\nexport type Margin = {\n  top?: number,\n  bottom?: number\n  left?: number\n  right?: number\n}\nexport type DataKey = 'xDataKey' | 'yDataKey' |\n'barDataKeys' | 'lineDataKeys' | 'circleDataKeys' | 'areaDataKeys'\n\nexport interface ScaleData<T> {\n  xDataKey?: keyof T\n  yDataKey?: keyof T\n  barDataKeys: (keyof T)[]\n  lineDataKeys: (keyof T)[]\n  circleDataKeys: (keyof T)[]\n  areaDataKeys: (keyof T)[]\n  internalXScale: ScaleBand<any> | ScaleLinear<any, any>\n  internalYScale: ScaleBand<any> | ScaleLinear<any, any>\n  xScale: ScaleBand<any> | ScaleLinear<any, any>\n  yScale: ScaleBand<any> | ScaleLinear<any, any>\n  userXScale?: any\n  userYScale?: any\n  barScale?: ScaleBand<any>\n}\nexport interface TooltipData<T = any> {\n  showToolTip: boolean\n  x: number\n  y: number\n  name: string,\n  value: string,\n  activeItem: T\n}\nexport type ScaleType = 'scaleLinear' | 'scaleBand'\n\nexport interface ChartContextArgument<T = any> {\n  data?: T[]\n  /** If it doesn't set, it will keep the same with parent width */\n  width?: number\n  /** if it doesn't set, it will keep the same with parent height */\n  height?: number\n  options?: RoughOptions\n  margin?: Margin\n  /**\n   * If it doesn't set, it will be d3.scaleBand().\n   * Passing a customized scale to override the default behavior. */\n  xScale?: any\n  /**\n  * If it doesn't set, it will be d3.scaleLiner().\n  * Passing a customized scale to override the default behavior. */\n  yScale?: any\n}\n\nexport interface ChartContextReturn<T = any> extends Required<ChartContextArgument<T>> {\n  contentHeight: number,\n  contentWidth: number,\n  scaleData: ScaleData<T>\n  setScaleData: (f: (scaleData: ScaleData<T>) => ScaleData<T>) => void\n  tooltipData: TooltipData<T>\n  setTooltipData: (f: (data: TooltipData<T>) => TooltipData<T>) => void\n}\n\n\nexport const ChartContext = React.createContext<ChartContextReturn>(null)\n\n\nexport default ChartContext\n","import * as React from 'react'\nimport { Scale } from './baseTypes'\n\nexport const isNil = x => x == null\n\nexport const isFunction = x => typeof x === 'function'\n\nexport const removeDuplicates = <T extends any>(xs: T[]) => { // eslint-disable-line\n  const res: any = {}\n  xs.forEach((key) => {\n    res[key] = true\n  })\n  return Object.keys(res)\n}\n\nexport const getBandWidth = (scale: Scale) => {\n  const ticks = ('ticks' in scale) ? scale.ticks() : scale.domain()\n  if (ticks.length <= 1) {\n    const [low, high] = scale.range()\n    return Math.abs(high - low)\n  }\n  return Math.abs(scale(ticks[1]) - scale(ticks[0]))\n}\n\nexport const processTooltipHandlers = (\n  child, handlers: { [key: string]: (e: any) => void },\n) => {\n  if (!React.isValidElement(child)) {\n    return null\n  }\n  const additionalProps = Object.entries(handlers)\n    .reduce((acc, [handlerName, f]) => {\n      if (child.props[handlerName]) {\n        acc[handlerName] = (e) => {\n          f(e)\n          child.props[handlerName](e)\n        }\n      } else {\n        acc[handlerName] = f\n      }\n      return acc\n    }, {})\n  return React.cloneElement(child, additionalProps)\n}\n\nexport const cloneElement = (\n  f: (displayName: string, props: object) => object,\n  child: any,\n) => {\n  if (!React.isValidElement(child as any)) {\n    return null\n  }\n  const additionalProps = f(child.type.displayName, child.props)\n  Object.entries(additionalProps).forEach(([propName, value]) => {\n    if (propName === 'options') {\n      additionalProps[propName] = {\n        ...value,\n        ...child.props.options,\n      }\n      return\n    }\n    if (!isNil(child.props[propName])) {\n      additionalProps[propName] = child.props[propName]\n    }\n  })\n  return React.cloneElement(child, additionalProps)\n}\n// eslint-disable-next-line\nexport const mapChildren = (f: (displayName: string, props: object, index: number) => object, children: any): any => React.Children.map(children, (child, index) => {\n  if (!React.isValidElement(child as any)) {\n    return null\n  }\n\n  return cloneElement(\n    (displayName, props) => f(displayName, props, index), child,\n  )\n})\n\nexport const filterChildren = (\n  f: (displayName: string, child: any, index: number) => any,\n  children: any,\n) => {\n  const result = []\n  React.Children.forEach(children, (child, index) => {\n    if (!React.isValidElement(child as any)) {\n      return\n    }\n    const { displayName } = child.type\n    if (f(displayName, child, index)) {\n      result.push(child)\n    }\n  })\n  return result\n}\n","import * as React from 'react'\nimport * as d3Scale from 'd3-scale'\nimport {\n  ChartContext, ChartContextArgument, ChartContextReturn,\n  DataKey, ScaleType, ScaleData,\n} from '../ChartContext'\nimport { isNil, removeDuplicates } from '../utils'\n\nconst getDomain = (type: ScaleType, values: number[]) => {\n  const min = Math.min(...values)\n  return (\n    type === 'scaleBand' ? values : [min > 0 ? 0 : min, Math.max(...values)]\n  )\n}\n\nexport function useChartContext<T extends object>(\n  props: ChartContextArgument<T>,\n  scaleKeyName?: DataKey,\n): ChartContextReturn<T> & {\n    contentHeight: number,\n    contentWidth: number\n  } {\n  const value = React.useContext<ChartContextReturn<T>>(ChartContext)\n  if (value === null) {\n    throw Error('Chart Components must be wrapped inside <ChartProvider>!')\n  }\n  const {\n    data, contentWidth, contentHeight,\n    setScaleData, scaleData,\n  } = value\n  const {\n    userXScale, userYScale, internalXScale, internalYScale,\n  } = scaleData\n  const { dataKey } = props as any\n  React.useEffect(() => {\n    if (!scaleKeyName) {\n      return\n    }\n\n    if (scaleKeyName === 'xDataKey') {\n      if (userXScale) {\n        userXScale.range([0, contentWidth])\n        setScaleData(prev => ({\n          ...prev,\n          xScale: userXScale,\n          xDataKey: dataKey,\n        }))\n        return\n      }\n      const values = data.map(d => d[dataKey])\n      internalXScale.range([0, contentWidth])\n\n      const domain = getDomain('scaleBand', values)\n      internalXScale.domain(domain)\n\n      setScaleData(prev => ({\n        ...prev,\n        [scaleKeyName]: dataKey,\n        xScale: internalXScale,\n      }))\n    }\n    if ((scaleKeyName === 'yDataKey') && dataKey) {\n      if (userYScale) {\n        userYScale.range([0, contentHeight])\n        setScaleData(prev => ({\n          ...prev,\n          yScale: userYScale,\n          yDataKey: dataKey,\n        }))\n      } else {\n        const values = data.map(d => d[dataKey])\n        internalYScale.range([0, contentHeight])\n        const domain = getDomain('scaleLinear', values)\n        internalYScale.domain(domain)\n        setScaleData(prev => ({\n          ...prev,\n          [scaleKeyName]: dataKey,\n          yScale: internalYScale,\n        }))\n      }\n    }\n    const getSeriesScaleData = (prev: ScaleData<T>) => {\n      const {\n        yDataKey,\n      } = prev\n      const prevDataKeys = prev[scaleKeyName] as string[]\n      const newDataKeys = prevDataKeys.indexOf(dataKey) > -1\n        ? prevDataKeys\n        : [...prevDataKeys, dataKey]\n      const newScaleData = {\n        ...prev,\n        [scaleKeyName]: newDataKeys,\n      }\n      const {\n        barDataKeys, lineDataKeys, circleDataKeys, areaDataKeys,\n      } = newScaleData\n\n      // TODO xScale\n      if (userYScale) {\n        userYScale.range([contentHeight, 0])\n        newScaleData.yScale = userYScale\n      } else {\n        const noneStackedValues = removeDuplicates(\n          [...lineDataKeys, ...barDataKeys, ...circleDataKeys],\n        ).reduce((acc, groupName) => {\n          acc.push(...data.map(item => +item[groupName]))\n          return acc\n        }, [])\n\n        const areaValues = data.map(\n          d => areaDataKeys.reduce((sum, key) => sum + (d[key] as any), 0),\n        )\n\n\n        const values = yDataKey\n          ? data.map(d => d[yDataKey])\n          : [...noneStackedValues, ...areaValues]\n\n        const domain = getDomain('scaleLinear', values)\n        internalYScale.domain(domain)\n        internalYScale.range([contentHeight, 0])\n        newScaleData.yScale = internalYScale\n      }\n      return newScaleData\n    }\n\n    if (scaleKeyName === 'barDataKeys') {\n      setScaleData((prev) => {\n        const newScaleData = getSeriesScaleData(prev)\n\n        const barScale = d3Scale\n          .scaleBand()\n          .domain(newScaleData[scaleKeyName] as string[])\n\n        newScaleData.barScale = barScale\n        return newScaleData\n      })\n    }\n    if (\n      (scaleKeyName === 'lineDataKeys')\n      || (scaleKeyName === 'circleDataKeys')\n      || (scaleKeyName === 'areaDataKeys')\n    ) {\n      setScaleData(prev => getSeriesScaleData(prev))\n    }\n  }, [scaleKeyName, dataKey, contentHeight, contentWidth])\n  const margin = {\n    ...value.margin,\n  }\n  const { width } = value\n  const { height } = value\n  return {\n    ...value,\n    width,\n    height,\n    contentWidth: width - margin.left - margin.right,\n    contentHeight: height - margin.top - margin.bottom,\n    options: {\n      ...(value.options),\n      ...(props.options || {}),\n    },\n    margin,\n    data: !isNil(props.data) ? props.data : value.data,\n    scaleData: value.scaleData,\n    setScaleData: value.setScaleData,\n  }\n}\n","/* eslint-disable react/no-array-index-key */\nimport * as React from 'react'\nimport { Line } from 'react-roughjs'\nimport { useChartContext } from '../hooks/useChartContext'\nimport { BaseChartComponentProps } from '../baseTypes'\nimport { isFunction, getBandWidth } from '../utils'\n\nexport interface XAxisProps extends BaseChartComponentProps {\n  dataKey: string\n  tickSize?: number\n  fontSize?: number\n  format?: (tick: string) => string\n  tickCount?: number\n}\n\nexport const XAxis: React.FC<XAxisProps> = (props) => {\n  if (!props.dataKey) {\n    throw Error('dataKey of XAxisProps is required')\n  }\n  const {\n    options, contentHeight, contentWidth, scaleData,\n  } = useChartContext(props, 'xDataKey')\n  const { xScale } = scaleData\n  const {\n    tickSize, fontSize, format, tickCount,\n  } = props\n  if (!xScale) {\n    return null\n  }\n\n  const ticks = ('ticks' in xScale) ? xScale.ticks(tickCount) : xScale.domain()\n  const bandwidth = getBandWidth(xScale)\n  const y = contentHeight\n  return (\n    <React.Fragment>\n      <Line\n        x1={0}\n        y1={y}\n        x2={contentWidth + bandwidth / 2}\n        y2={y}\n        options={{\n          bowing: 0.2,\n          ...options,\n        }}\n      />\n      {\n        ticks.map((t, index) => (\n          <React.Fragment\n            key={index}\n          >\n            <Line\n              x1={xScale(t) + bandwidth / 2}\n              y1={y}\n              x2={xScale(t) + bandwidth / 2}\n              y2={y + tickSize}\n              options={{\n                strokeWidth: 2,\n                ...options,\n              }}\n            />\n            <text\n              x={xScale(t) + bandwidth / 2}\n              y={y + tickSize + fontSize}\n              stroke={options.stroke}\n              fill={options.stroke}\n              textAnchor=\"middle\"\n            >\n              {isFunction(format) ? format(t) : String(t)}\n            </text>\n          </React.Fragment>\n        ))\n      }\n    </React.Fragment>\n  )\n}\n\nXAxis.displayName = 'XAxis'\nXAxis.defaultProps = {\n  tickSize: 10,\n  fontSize: 16,\n  tickCount: 10,\n}\n\nexport default XAxis\n","/* eslint-disable react/no-array-index-key */\nimport * as React from 'react'\nimport { Line } from 'react-roughjs'\nimport { useChartContext } from '../hooks/useChartContext'\nimport { BaseChartComponentProps } from '../baseTypes'\nimport { isFunction } from '../utils'\n\nexport interface YAxisProps extends BaseChartComponentProps {\n  dataKey?: string\n  tickSize?: number\n  tickCount?: number\n  fontSize?: number\n  format?: (tick: string) => string\n}\n\nexport const YAxis: React.FC<YAxisProps> = (props) => {\n  const {\n    tickSize, fontSize, format, tickCount,\n  } = props\n  const {\n    options, contentHeight, scaleData,\n  } = useChartContext(props, 'yDataKey')\n  const { yScale: scale } = scaleData\n  if (!scale) {\n    return null\n  }\n\n  const ticks = (scale as any).ticks ? (scale as any).ticks(tickCount) : scale.domain()\n  return (\n    <React.Fragment>\n      <Line\n        x1={0}\n        y1={0}\n        x2={0}\n        y2={contentHeight}\n        options={{\n          bowing: 0.2,\n          ...options,\n        }}\n      />\n      {\n        ticks.map((t, index) => (\n          <React.Fragment\n            key={index}\n          >\n            <Line\n              x1={0 - tickSize}\n              x2={0}\n              y1={scale(t)}\n              y2={scale(t)}\n              options={{\n                strokeWidth: 2,\n                ...options,\n              }}\n            />\n            <text\n              x={0 - tickSize}\n              y={scale(t) + fontSize / 3}\n              stroke={options.stroke}\n              fill={options.stroke}\n              textAnchor=\"end\"\n            >\n              {isFunction(format) ? format(t) : String(t)}\n            </text>\n          </React.Fragment>\n        ))\n      }\n    </React.Fragment>\n  )\n}\n\nYAxis.displayName = 'YAxis'\nYAxis.defaultProps = {\n  tickSize: 10,\n  fontSize: 16,\n  tickCount: 10,\n}\n\nexport default YAxis\n","import { useChartContext } from './useChartContext'\n\n// https://stackoverflow.com/questions/6307307/click-mouse-position-with-scroll-in-javascript\n\nconst mousePositions = (event) => {\n  const IE = !!document.all\n  let x\n  let y\n\n  if (IE) {\n    x = event.clientX + document.body.scrollLeft\n    y = event.clientY + document.body.scrollTop\n  } else {\n    x = ((window as any).Event)\n      ? event.pageX\n      : event.clientX + (\n        document.documentElement.scrollLeft\n          ? document.documentElement.scrollLeft\n          : document.body.scrollLeft\n      )\n    y = ((window as any).Event)\n      ? event.pageY\n      : event.clientY + (\n        document.documentElement.scrollTop\n          ? document.documentElement.scrollTop\n          : document.body.scrollTop\n      )\n  }\n  return { x, y }\n}\nexport const useTooltipGenerator = (props: {\n  dataKey: string\n  [key: string]: any\n}) => {\n  const { dataKey } = props\n  if (!dataKey) {\n    throw Error('dataKey is Required!')\n  }\n  const { setTooltipData } = useChartContext(props as any)\n  const generateHandlers = (\n    item,\n    content: { name: string, value: string } = { name: '', value: '' },\n  ) => ({\n    onMouseOver: (e) => {\n      const { x, y } = mousePositions(e)\n      setTooltipData(prev => ({\n        ...prev,\n        showToolTip: true,\n        x,\n        y,\n        name: content.name,\n        value: content.value,\n        activeItem: item,\n      }))\n    },\n    onMouseMove: (e) => {\n      const { x, y } = mousePositions(e)\n      setTooltipData(prev => ({\n        ...prev,\n        showToolTip: true,\n        x,\n        y,\n        activeItem: item,\n      }))\n    },\n    onMouseOut: () => {\n      setTooltipData(prev => ({\n        ...prev,\n        showToolTip: false,\n      }))\n    },\n  })\n  return {\n    generateHandlers,\n  }\n}\n","/* eslint-disable react/no-array-index-key */\nimport * as React from 'react'\nimport { Rectangle, RectangleProps } from 'react-roughjs'\nimport { useChartContext } from '../hooks/useChartContext'\nimport { BaseChartComponentProps } from '../baseTypes'\nimport { isFunction, getBandWidth, processTooltipHandlers } from '../utils'\nimport { useTooltipGenerator } from '../hooks/useTooltipGenerator'\n\nexport interface BarSeriesProps<T extends object> extends BaseChartComponentProps {\n  dataKey: string,\n  /** Use for handling event and rendering customized shapes/styles */\n  children?: (item: T, props: RectangleProps, index: number) => JSX.Element\n}\n\nexport const BarSeries  = <T extends object>(props: BarSeriesProps<T>) => { // eslint-disable-line\n  const {\n    dataKey, options,\n  } = props\n  const {\n    data, contentHeight, scaleData,\n  } = useChartContext(props, 'barDataKeys')\n  const {\n    xScale, barScale, yScale, xDataKey,\n  } = scaleData\n  const { generateHandlers } = useTooltipGenerator(props)\n  if (!dataKey) {\n    throw Error('dataKey is Required!')\n  }\n  // TODO xDataKey\n  if (!xScale || !barScale || !yScale || !xDataKey) {\n    return null\n  }\n\n  const width = getBandWidth(xScale)\n  const offset = (width * 0.2) / 2\n  const generateChildProps = (item:T) => {\n    const x = xScale(item[xDataKey])\n    barScale\n      .range([x + offset, x + width - offset])\n    const min = yScale.domain()[0]\n    const y0 = yScale(0)\n    const itemY = yScale(item[dataKey])\n    const y = min >= 0 ? itemY : yScale(Math.max(item[dataKey], 0))\n    const height = min >= 0 ? contentHeight - itemY : Math.abs(y0 - itemY)\n    return {\n      x: barScale(dataKey),\n      y,\n      width: barScale.bandwidth(),\n      height,\n      options: {\n        fill: 'black',\n        ...options,\n      },\n    }\n  }\n  const { children } = props\n  return (\n    <React.Fragment>\n      {\n        data.map((item, index) => {\n          const handlers = generateHandlers(item, {\n            name: `${dataKey}`,\n            value: `${item[dataKey]}`,\n          })\n          const childProps = generateChildProps(item as T)\n          return isFunction(children)\n            ? processTooltipHandlers(children(item as T, childProps, index), handlers) : (\n              <Rectangle\n                key={index}\n                {...childProps}\n                {...handlers}\n              />\n            )\n        })\n      }\n    </React.Fragment>\n  )\n}\n\nBarSeries.displayName = 'BarSeries'\n\n\nexport default BarSeries\n","import * as React from 'react'\nimport { Path, PathProps } from 'react-roughjs'\nimport * as d3Shape from 'd3-shape'\n\nexport interface ArcProps extends Omit<PathProps, 'd'> {\n  innerRadius?: number\n  outerRadius?: number\n  startAngle?: number\n  endAngle?: number\n  padAngle?: number\n  cx?: number\n  cy?: number\n}\n\nexport const Arc: React.FC<ArcProps> = (props) => {\n  const {\n    innerRadius, outerRadius,\n    startAngle, endAngle, padAngle, options,\n    cx, cy, ...rest\n  } = props\n  const a = d3Shape.arc()\n  const d = a({\n    innerRadius,\n    outerRadius,\n    startAngle,\n    endAngle,\n    padAngle,\n  })\n  return (\n    <Path\n      d={d}\n      transform={`translate(${cx}, ${cy})`}\n      options={options}\n      {...rest}\n    />\n  )\n}\n\nArc.displayName = 'RcArc'\nArc.defaultProps = {\n  innerRadius: 0,\n  outerRadius: 0,\n  startAngle: 0,\n}\n\nexport default Arc\n","/* eslint-disable react/no-array-index-key */\nimport * as React from 'react'\nimport * as d3Shape from 'd3-shape'\nimport { useChartContext } from '../hooks/useChartContext'\nimport { BaseChartComponentProps } from '../baseTypes'\nimport {\n  isNil, isFunction, processTooltipHandlers,\n} from '../utils'\nimport { Arc, ArcProps } from './Arc'\n\nimport { useTooltipGenerator } from '../hooks/useTooltipGenerator'\n\n\nexport interface ArcSeriesProps<T> extends BaseChartComponentProps {\n  dataKey: string\n  innerRadiusPercent?:number\n  outerRadiusPercent?:number\n  cx?: number\n  cy?: number\n  padAngle?: number\n  startAngle?: number\n  /** Default is Math.PI * 2 */\n  endAngle?: number\n  children?: (item: T, props: ArcProps, index: number) => React.ReactNode\n}\n\nexport const ArcSeries = <T extends object>(props: ArcSeriesProps<T>) => { // eslint-disable-line\n  const {\n    data, options, contentHeight, contentWidth,\n  } = useChartContext(props)\n  const { generateHandlers } = useTooltipGenerator(props)\n  const {\n    dataKey, cx, cy, innerRadiusPercent, outerRadiusPercent,\n    padAngle: padAngleProp,\n    startAngle: startAngleProp,\n    endAngle: endAngleProp, children,\n  } = props\n  const newCx = !isNil(cx) ? cx : contentWidth / 2\n  const newCy = !isNil(cy) ? cy : contentHeight / 2\n  const radius = Math.min(newCx, newCy)\n\n  const arcs = d3Shape.pie()\n    .startAngle(startAngleProp)\n    .padAngle(padAngleProp)\n    .endAngle(endAngleProp)(data.map(d => d[dataKey]))\n  const arcsData = arcs.map((arc) => {\n    const { startAngle, endAngle, padAngle } = arc\n    return {\n      innerRadius: radius * innerRadiusPercent,\n      outerRadius: radius * outerRadiusPercent,\n      startAngle,\n      endAngle,\n      padAngle,\n    }\n  })\n  const total: number = data.reduce((acc, d) => acc + d[dataKey], 0)\n  return (\n    <React.Fragment>\n      {arcsData.map((arcProps, index) => {\n        const item = data[index]\n        const percent = ((item[dataKey] / total) * 100).toPrecision(3)\n        const handlers = generateHandlers(item, {\n          name: `${dataKey} ${item[dataKey]}`,\n          value: `${percent}%`,\n        })\n        const childProps: ArcProps = {\n          ...arcProps,\n          cx: newCx,\n          cy: newCy,\n          options: {\n            fill: 'black',\n            ...options,\n          },\n        }\n        if (isFunction(children)) {\n          return processTooltipHandlers(children(item, childProps, index), handlers)\n        }\n        return (\n          <Arc\n            key={index}\n            {...childProps}\n            {...handlers}\n          />\n        )\n      })}\n    </React.Fragment>\n  )\n}\n\nArcSeries.displayName = 'ArcSeries'\nArcSeries.defaultProps = {\n  innerRadiusPercent: 0,\n  outerRadiusPercent: 1,\n  padAngle: 0,\n  startAngle: 0,\n  endAngle: Math.PI * 2,\n}\n\nexport default ArcSeries\n","import * as React from 'react'\nimport { Line } from 'react-roughjs'\nimport { BaseChartComponentProps } from '../baseTypes'\nimport { useChartContext } from '../hooks/useChartContext'\n\nexport interface Y0Props extends BaseChartComponentProps {\n\n}\n\nexport const Y0: React.FC<Y0Props> = (props) => {\n  const { scaleData: { yScale }, contentWidth } = useChartContext(props)\n  if (!yScale) {\n    return null\n  }\n  return (\n    <Line\n      y1={yScale(0)}\n      y2={yScale(0)}\n      x1={0}\n      x2={contentWidth}\n      strokeDasharray=\"30\"\n      options={{\n        bowing: 0.2,\n        ...props.options,\n      }}\n    />\n  )\n}\n\nY0.displayName = 'Y0'\n\nexport default Y0\n","/* eslint-disable react/no-array-index-key */\nimport * as React from 'react'\nimport { Circle, CircleProps } from 'react-roughjs'\nimport { BaseChartComponentProps } from '../baseTypes'\nimport { useChartContext } from '../hooks/useChartContext'\nimport { getBandWidth, isFunction, processTooltipHandlers } from '../utils'\nimport { useTooltipGenerator } from '../hooks/useTooltipGenerator'\n\n\nexport interface CircleSeriesProps<T extends object> extends BaseChartComponentProps {\n  dataKey: keyof T,\n  children?: (item: T, props: CircleProps, index: number) => React.ReactNode\n}\n\n\nexport const CircleSeries = <T extends object>(props: CircleSeriesProps<T>) => { // eslint-disable-line\n  const { scaleData, data, options } = useChartContext(props, 'circleDataKeys')\n  const {\n    xScale, yScale, xDataKey,\n  } = scaleData\n  const { dataKey } = props\n  const { generateHandlers } = useTooltipGenerator(props as any)\n  if (!xScale || !yScale || !dataKey || !xDataKey) {\n    return null\n  }\n\n  const bandwidth = getBandWidth(xScale)\n  const points: [number, number][] = data.map((item: any) => ([\n    xScale(item[xDataKey]),\n    yScale(item[dataKey]),\n  ]))\n  const { children } = props\n  return (\n    <React.Fragment>\n      {points.map(([x, y], index) => {\n        const childProps: CircleProps = {\n          x: x + bandwidth / 2,\n          y,\n          diameter: 10,\n          options: {\n            ...options,\n          },\n        }\n        const item = data[index] as T\n        const handlers = generateHandlers(data[index], {\n          name: `${item[xDataKey]} ${dataKey}`,\n          value: `${item[dataKey]}`,\n        })\n        if (isFunction(children)) {\n          return processTooltipHandlers(children(data[index] as T, childProps, index), handlers)\n        }\n        return (\n          <Circle\n            key={index}\n            {...childProps}\n            {...handlers}\n          />\n        )\n      })}\n    </React.Fragment>\n  )\n}\n\nCircleSeries.displayName = 'CircleSeries'\n\nexport default CircleSeries\n","/* eslint-disable react/no-array-index-key */\nimport * as React from 'react'\nimport * as d3Shape from 'd3-shape'\nimport { Path, CircleProps } from 'react-roughjs'\nimport { BaseChartComponentProps, Curve } from '../baseTypes'\nimport { useChartContext } from '../hooks/useChartContext'\nimport { getBandWidth } from '../utils'\nimport { CircleSeries } from './CircleSeries'\n\n\nexport interface LineSeriesProps<T extends object> extends BaseChartComponentProps {\n  dataKey: keyof T\n  curve?: Curve\n  children?: (item: T, props: CircleProps, index: number) => React.ReactNode\n}\n\n\nexport const LineSeries = <T extends object>(props: LineSeriesProps<T>) => { // eslint-disable-line\n  const { scaleData, data, options } = useChartContext(props, 'lineDataKeys')\n  const { xScale, yScale, xDataKey } = scaleData\n  const { dataKey, curve } = props\n  if (!xScale || !yScale || !dataKey || !xDataKey) {\n    return null\n  }\n\n  const bandwidth = getBandWidth(xScale)\n  const points: [number, number][] = data.map((item: any) => ([\n    xScale(item[xDataKey]),\n    yScale(item[dataKey]),\n  ]))\n\n  const line = d3Shape\n    .line()\n    .curve(curve)\n\n  const path = line(points)\n  return (\n    <React.Fragment>\n      <Path\n        transform={`translate(${bandwidth / 2}, 0)`}\n        d={path}\n        options={options}\n      />\n      <CircleSeries\n        {...props}\n      />\n    </React.Fragment>\n  )\n}\n\nLineSeries.displayName = 'LineSeries'\n\nLineSeries.defaultProps = {\n  curve: d3Shape.curveCardinal.tension(0.5),\n}\n\nexport default LineSeries\n","import * as React from 'react'\nimport * as ReactDOM from 'react-dom'\nimport { RoughProvider, Rectangle } from 'react-roughjs'\nimport { BaseChartComponentProps } from '../baseTypes'\nimport { useChartContext } from '../hooks/useChartContext'\nimport { isNil, isFunction } from '../utils'\n\nexport interface TooltipProps<T=any> extends Omit<BaseChartComponentProps, 'data'>{\n  width?:number,\n  height?: number\n  fontSize?: number,\n  /** Use for rendering customized content */\n  children?: (activeItem: T) => React.ReactNode\n}\n\n\nexport const Tooltip: React.FC<TooltipProps> = (props) => {\n  const {\n    tooltipData, setTooltipData, contentWidth, options,\n  } = useChartContext(props)\n  const {\n    x, y, showToolTip, name, value, activeItem,\n  } = tooltipData\n  const {\n    width: propsWidth, height, fontSize, children,\n  } = props\n  const [internalWidth, setWidth] = React.useState(120)\n  const textRef = React.useRef<SVGTextElement>()\n  const width = isNil(propsWidth) ? internalWidth : propsWidth\n  React.useEffect(() => {\n    const node = textRef.current\n    if (node) {\n      const { width: textWidth } = node.getBBox()\n      setWidth(textWidth + 30)\n    }\n  }, [textRef.current])\n  if (!showToolTip || !activeItem) {\n    return null\n  }\n  // TODO pintX pointY\n  const left = contentWidth - x < width + 20 ? x - 20 - width : x + 20\n  const ellipse = (s = '', length) => (s.length > length ? `${s.slice(0, length)}...` : s)\n  const renderChildren = () => {\n    const text = (s: string) => (\n      <text\n        ref={textRef}\n        textAnchor=\"middle\"\n        stroke=\"black\"\n        fill=\"black\"\n        x={width / 2}\n        y={height / 2 + fontSize / 3}\n      >\n        {s}\n      </text>\n    )\n\n    if (isFunction(children)) {\n      const content = children(activeItem)\n      return typeof content === 'string' ? text(content) : content\n    }\n    return text(`${ellipse(name, 20)}: ${ellipse(value, 5)}`)\n  }\n  const content = (\n    <div\n      style={{\n        position: 'absolute',\n        left,\n        top: y - height / 2,\n      }}\n    >\n      <svg\n        width={width + 4}\n        height={height + 4}\n      >\n        <g transform=\"translate(2, 2)\">\n          <RoughProvider>\n            <Rectangle\n              width={width}\n              height={height}\n              onMouseOver={(e) => {\n                setTooltipData(prev => ({\n                  ...prev,\n                  x: e.clientX,\n                  y: e.clientY,\n                }))\n              }}\n              onMouseMove={(e) => {\n                setTooltipData(prev => ({\n                  ...prev,\n                  x: e.clientX,\n                  y: e.clientY,\n                }))\n              }}\n              onMouseOut={() => {\n                setTooltipData(prev => ({\n                  ...prev,\n                  showToolTip: false,\n                }))\n              }}\n              options={{\n                fill: 'white',\n                fillStyle: 'solid',\n                strokeWidth: 2,\n                ...options,\n              }}\n            />\n          </RoughProvider>\n          <RoughProvider>\n            {renderChildren()}\n          </RoughProvider>\n        </g>\n      </svg>\n    </div>\n  )\n\n  return ReactDOM.createPortal(content, document.body)\n}\n\nTooltip.displayName = 'Tooltip'\nTooltip.defaultProps = {\n  height: 40,\n  fontSize: 16,\n}\n\nexport default Tooltip\n","import * as React from 'react'\nimport { RoughProvider } from 'react-roughjs'\nimport * as d3Scale from 'd3-scale'\nimport {\n  ChartContext, ChartContextArgument, ScaleData, TooltipData,\n} from '../ChartContext'\nimport { isNil } from '../utils'\n\nconst { Provider } = ChartContext\nconst defaultMargin = {\n  top: 10, right: 10, bottom: 50, left: 50,\n}\n\nexport interface ChartProviderProps extends ChartContextArgument {\n}\n\nexport const ChartProvider: React.FC<ChartProviderProps> = (props) => {\n  const [innerHeight, setInnerHeight] = React.useState(0)\n  const [innerWidth, setInnerWidth] = React.useState(0)\n  const ref = React.useRef<SVGSVGElement>()\n  const internalXScale = d3Scale.scaleBand()\n  const internalYScale = d3Scale.scaleLinear()\n  const [scaleData, setScaleData] = React.useState<ScaleData<any>>({\n    barDataKeys: [],\n    lineDataKeys: [],\n    circleDataKeys: [],\n    areaDataKeys: [],\n    xScale: props.xScale || internalXScale,\n    yScale: props.yScale || internalYScale,\n    userXScale: props.xScale,\n    userYScale: props.yScale,\n    internalXScale,\n    internalYScale,\n  })\n  const [tooltipData, setTooltipData] = React.useState<TooltipData>({\n    x: -1,\n    y: -1,\n    showToolTip: false,\n    name: '',\n    value: '',\n    activeItem: null,\n  })\n\n\n  React.useEffect(() => {\n    const handleResize = () => {\n      if (ref.current && (isNil(props.height) || isNil(props.width))) {\n        const boundingRect = ref.current.parentElement.getBoundingClientRect()\n        setInnerHeight(boundingRect.height)\n        setInnerWidth(boundingRect.width)\n      }\n    }\n    handleResize()\n    window.addEventListener('resize', handleResize)\n    return () => window.removeEventListener('resize', handleResize)\n  }, [props.height, props.width, ref.current])\n\n\n  const height = !isNil(props.height) ? props.height : innerHeight\n  const width = !isNil(props.width) ? props.width : innerWidth\n\n  const { margin: propsMargin } = props\n  const margin = {\n    ...defaultMargin,\n    ...propsMargin,\n  }\n  const shouldRenderChildren = () => (height && width)\n  return (\n    <Provider\n      value={{\n        ...props as any,\n        height,\n        width,\n        margin,\n        scaleData,\n        setScaleData: f => setScaleData(f),\n        contentHeight: height - margin.bottom - margin.top,\n        contentWidth: width - margin.left - margin.right,\n        tooltipData,\n        setTooltipData: f => setTooltipData(f),\n      }}\n    >\n      <svg\n        height={height}\n        width={width}\n        ref={ref}\n      >\n        <RoughProvider\n          transform={`translate(${margin.left}, ${margin.top})`}\n          config={{\n            options: props.options,\n          }}\n        >\n          {shouldRenderChildren() && props.children}\n        </RoughProvider>\n      </svg>\n    </Provider>\n  )\n}\n\nChartProvider.displayName = 'ChartProvider'\nChartProvider.defaultProps = {\n  data: [],\n  options: {},\n  margin: defaultMargin,\n}\n\nexport default RoughProvider\n","/* eslint-disable react/no-array-index-key */\nimport * as React from 'react'\nimport * as d3Shape from 'd3-shape'\nimport { Path, CircleProps, Circle } from 'react-roughjs'\nimport { BaseChartComponentProps, Curve } from '../baseTypes'\nimport { useChartContext } from '../hooks/useChartContext'\nimport { getBandWidth, isFunction, processTooltipHandlers } from '../utils'\nimport { useTooltipGenerator } from '../hooks/useTooltipGenerator'\n\n\nexport interface AreaSeriesProps<T extends object> extends BaseChartComponentProps {\n  dataKey: keyof T\n  curve?: Curve\n  padding?: number\n  /** For rendering customized vertex */\n  children?: (item: T, props: CircleProps, index: number) => React.ReactNode\n}\n\n\nexport const AreaSeries = <T extends object>(props: AreaSeriesProps<T>) => { // eslint-disable-line\n  const {\n    scaleData, data, options,\n  } = useChartContext(props, 'areaDataKeys')\n  const {\n    xScale, yScale, xDataKey, areaDataKeys,\n  } = scaleData\n  const {\n    dataKey, curve, children, padding,\n  } = props\n  const { generateHandlers } = useTooltipGenerator(props as any)\n\n  if (!xScale || !yScale || !dataKey || !xDataKey) {\n    return null\n  }\n  const areaKeyIndex = areaDataKeys.indexOf(dataKey)\n  const calculateY = (d) => {\n    if (areaKeyIndex === 0) {\n      return {\n        y0: yScale(yScale.domain()[0]),\n        y1: yScale(d[dataKey]),\n      }\n    }\n    const sum = (keys = []) => keys.reduce((acc, key) => acc + d[key], 0)\n    return {\n      y0: yScale(sum(areaDataKeys.slice(0, areaKeyIndex))) - padding,\n      y1: yScale(sum(areaDataKeys.slice(0, areaKeyIndex + 1))),\n    }\n  }\n  const bandwidth = getBandWidth(xScale)\n  interface Position {\n    x: number\n    y0: number\n    y1: number\n  }\n  const positions: Position[] = data.map((item: any) => {\n    const { y0, y1 } = calculateY(item)\n    return {\n      x: xScale(item[xDataKey]),\n      y0,\n      y1,\n    }\n  })\n  const area = d3Shape.area<Position>()\n    .x(d => d.x)\n    .y1(d => d.y1)\n    .y0(d => d.y0)\n    .curve(curve as any)\n  const areaPath = area(positions)\n  return (\n    <React.Fragment>\n      <Path\n        transform={`translate(${bandwidth / 2}, 0)`}\n        d={areaPath}\n        options={{\n          fill: options.stroke,\n          ...options,\n        }}\n      />\n      {positions.map(({ x, y1 }, index) => {\n        const childProps: CircleProps = {\n          x: x + bandwidth / 2,\n          y: y1,\n          diameter: 12,\n          options: {\n            fill: options.fill || options.stroke,\n            strokeWidth: 2,\n            fillStyle: 'solid',\n            stroke: 'white',\n          },\n        }\n        const item = data[index] as T\n        const handlers = generateHandlers(data[index], {\n          name: `${item[xDataKey]} ${dataKey}`,\n          value: `${item[dataKey]}`,\n        })\n        if (isFunction(children)) {\n          return processTooltipHandlers(children(data[index] as T, childProps, index), handlers)\n        }\n        return (\n          <Circle\n            key={index}\n            {...childProps}\n            {...handlers}\n          />\n        )\n      })}\n    </React.Fragment>\n  )\n}\n\nAreaSeries.displayName = 'LineSeries'\n\nAreaSeries.defaultProps = {\n  curve: d3Shape.curveCardinal.tension(0.5),\n  padding: 6,\n}\n\nexport default AreaSeries\n"],"names":["const","ChartContext","React","isNil","x","isFunction","removeDuplicates","xs","res","forEach","key","Object","keys","getBandWidth","scale","ticks","domain","length","range","low","high","Math","abs","processTooltipHandlers","child","handlers","additionalProps","entries","reduce","acc","f","props","handlerName","e","getDomain","type","values","min","max","useChartContext","scaleKeyName","value","Error","contentWidth","contentHeight","setScaleData","scaleData","userYScale","internalXScale","internalYScale","dataKey","userXScale","prev","xScale","xDataKey","data","map","d","yScale","yDataKey","getSeriesScaleData","prevDataKeys","newDataKeys","indexOf","newScaleData","lineDataKeys","circleDataKeys","areaDataKeys","noneStackedValues","barDataKeys","groupName","push","item","areaValues","sum","barScale","d3Scale","margin","width","height","left","right","top","bottom","options","XAxis","fontSize","format","tickCount","bandwidth","y","Line","x1","y1","x2","y2","bowing","t","index","tickSize","strokeWidth","stroke","fill","textAnchor","String","displayName","defaultProps","YAxis","mousePositions","event","IE","document","all","clientX","body","scrollLeft","clientY","scrollTop","window","Event","pageX","documentElement","pageY","useTooltipGenerator","setTooltipData","generateHandlers","content","name","onMouseOver","showToolTip","activeItem","onMouseMove","onMouseOut","BarSeries","offset","generateChildProps","y0","itemY","children","childProps","Rectangle","Arc","outerRadius","startAngle","endAngle","padAngle","cx","cy","rest","a","d3Shape","innerRadius","Path","transform","ArcSeries","innerRadiusPercent","outerRadiusPercent","padAngleProp","startAngleProp","endAngleProp","newCx","newCy","radius","arcs","arcsData","arc","total","arcProps","percent","toPrecision","PI","Y0","strokeDasharray","CircleSeries","points","diameter","Circle","LineSeries","curve","line","path","tension","Tooltip","tooltipData","internalWidth","setWidth","textRef","propsWidth","node","current","getBBox","textWidth","ellipse","s","slice","renderChildren","text","ref","style","position","RoughProvider","fillStyle","ReactDOM","Provider","defaultMargin","ChartProvider","innerHeight","setInnerHeight","innerWidth","setInnerWidth","handleResize","boundingRect","parentElement","getBoundingClientRect","addEventListener","removeEventListener","propsMargin","shouldRenderChildren","config","AreaSeries","padding","areaKeyIndex","calculateY","positions","area","areaPath"],"mappings":"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"}
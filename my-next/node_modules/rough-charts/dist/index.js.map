{"version":3,"file":"index.js","sources":["../src/ChartContext.tsx","../src/utils.ts","../src/hooks/useChartContext.ts","../src/components/XAxis.tsx","../src/components/YAxis.tsx","../src/hooks/useTooltipGenerator.ts","../src/components/BarSeries.tsx","../src/components/Arc.tsx","../src/components/ArcSeries.tsx","../src/components/Y0.tsx","../src/components/CircleSeries.tsx","../src/components/LineSeries.tsx","../src/components/Tooltip.tsx","../src/components/ChartProvider.tsx","../src/components/AreaSeries.tsx"],"sourcesContent":["import { RoughOptions } from 'react-roughjs'\nimport { ScaleBand, ScaleLinear } from 'd3-scale'\nimport * as React from 'react'\n\nexport type Margin = {\n  top?: number,\n  bottom?: number\n  left?: number\n  right?: number\n}\nexport type DataKey = 'xDataKey' | 'yDataKey' |\n'barDataKeys' | 'lineDataKeys' | 'circleDataKeys' | 'areaDataKeys'\n\nexport interface ScaleData<T> {\n  xDataKey?: keyof T\n  yDataKey?: keyof T\n  barDataKeys: (keyof T)[]\n  lineDataKeys: (keyof T)[]\n  circleDataKeys: (keyof T)[]\n  areaDataKeys: (keyof T)[]\n  internalXScale: ScaleBand<any> | ScaleLinear<any, any>\n  internalYScale: ScaleBand<any> | ScaleLinear<any, any>\n  xScale: ScaleBand<any> | ScaleLinear<any, any>\n  yScale: ScaleBand<any> | ScaleLinear<any, any>\n  userXScale?: any\n  userYScale?: any\n  barScale?: ScaleBand<any>\n}\nexport interface TooltipData<T = any> {\n  showToolTip: boolean\n  x: number\n  y: number\n  name: string,\n  value: string,\n  activeItem: T\n}\nexport type ScaleType = 'scaleLinear' | 'scaleBand'\n\nexport interface ChartContextArgument<T = any> {\n  data?: T[]\n  /** If it doesn't set, it will keep the same with parent width */\n  width?: number\n  /** if it doesn't set, it will keep the same with parent height */\n  height?: number\n  options?: RoughOptions\n  margin?: Margin\n  /**\n   * If it doesn't set, it will be d3.scaleBand().\n   * Passing a customized scale to override the default behavior. */\n  xScale?: any\n  /**\n  * If it doesn't set, it will be d3.scaleLiner().\n  * Passing a customized scale to override the default behavior. */\n  yScale?: any\n}\n\nexport interface ChartContextReturn<T = any> extends Required<ChartContextArgument<T>> {\n  contentHeight: number,\n  contentWidth: number,\n  scaleData: ScaleData<T>\n  setScaleData: (f: (scaleData: ScaleData<T>) => ScaleData<T>) => void\n  tooltipData: TooltipData<T>\n  setTooltipData: (f: (data: TooltipData<T>) => TooltipData<T>) => void\n}\n\n\nexport const ChartContext = React.createContext<ChartContextReturn>(null)\n\n\nexport default ChartContext\n","import * as React from 'react'\nimport { Scale } from './baseTypes'\n\nexport const isNil = x => x == null\n\nexport const isFunction = x => typeof x === 'function'\n\nexport const removeDuplicates = <T extends any>(xs: T[]) => { // eslint-disable-line\n  const res: any = {}\n  xs.forEach((key) => {\n    res[key] = true\n  })\n  return Object.keys(res)\n}\n\nexport const getBandWidth = (scale: Scale) => {\n  const ticks = ('ticks' in scale) ? scale.ticks() : scale.domain()\n  if (ticks.length <= 1) {\n    const [low, high] = scale.range()\n    return Math.abs(high - low)\n  }\n  return Math.abs(scale(ticks[1]) - scale(ticks[0]))\n}\n\nexport const processTooltipHandlers = (\n  child, handlers: { [key: string]: (e: any) => void },\n) => {\n  if (!React.isValidElement(child)) {\n    return null\n  }\n  const additionalProps = Object.entries(handlers)\n    .reduce((acc, [handlerName, f]) => {\n      if (child.props[handlerName]) {\n        acc[handlerName] = (e) => {\n          f(e)\n          child.props[handlerName](e)\n        }\n      } else {\n        acc[handlerName] = f\n      }\n      return acc\n    }, {})\n  return React.cloneElement(child, additionalProps)\n}\n\nexport const cloneElement = (\n  f: (displayName: string, props: object) => object,\n  child: any,\n) => {\n  if (!React.isValidElement(child as any)) {\n    return null\n  }\n  const additionalProps = f(child.type.displayName, child.props)\n  Object.entries(additionalProps).forEach(([propName, value]) => {\n    if (propName === 'options') {\n      additionalProps[propName] = {\n        ...value,\n        ...child.props.options,\n      }\n      return\n    }\n    if (!isNil(child.props[propName])) {\n      additionalProps[propName] = child.props[propName]\n    }\n  })\n  return React.cloneElement(child, additionalProps)\n}\n// eslint-disable-next-line\nexport const mapChildren = (f: (displayName: string, props: object, index: number) => object, children: any): any => React.Children.map(children, (child, index) => {\n  if (!React.isValidElement(child as any)) {\n    return null\n  }\n\n  return cloneElement(\n    (displayName, props) => f(displayName, props, index), child,\n  )\n})\n\nexport const filterChildren = (\n  f: (displayName: string, child: any, index: number) => any,\n  children: any,\n) => {\n  const result = []\n  React.Children.forEach(children, (child, index) => {\n    if (!React.isValidElement(child as any)) {\n      return\n    }\n    const { displayName } = child.type\n    if (f(displayName, child, index)) {\n      result.push(child)\n    }\n  })\n  return result\n}\n","import * as React from 'react'\nimport * as d3Scale from 'd3-scale'\nimport {\n  ChartContext, ChartContextArgument, ChartContextReturn,\n  DataKey, ScaleType, ScaleData,\n} from '../ChartContext'\nimport { isNil, removeDuplicates } from '../utils'\n\nconst getDomain = (type: ScaleType, values: number[]) => {\n  const min = Math.min(...values)\n  return (\n    type === 'scaleBand' ? values : [min > 0 ? 0 : min, Math.max(...values)]\n  )\n}\n\nexport function useChartContext<T extends object>(\n  props: ChartContextArgument<T>,\n  scaleKeyName?: DataKey,\n): ChartContextReturn<T> & {\n    contentHeight: number,\n    contentWidth: number\n  } {\n  const value = React.useContext<ChartContextReturn<T>>(ChartContext)\n  if (value === null) {\n    throw Error('Chart Components must be wrapped inside <ChartProvider>!')\n  }\n  const {\n    data, contentWidth, contentHeight,\n    setScaleData, scaleData,\n  } = value\n  const {\n    userXScale, userYScale, internalXScale, internalYScale,\n  } = scaleData\n  const { dataKey } = props as any\n  React.useEffect(() => {\n    if (!scaleKeyName) {\n      return\n    }\n\n    if (scaleKeyName === 'xDataKey') {\n      if (userXScale) {\n        userXScale.range([0, contentWidth])\n        setScaleData(prev => ({\n          ...prev,\n          xScale: userXScale,\n          xDataKey: dataKey,\n        }))\n        return\n      }\n      const values = data.map(d => d[dataKey])\n      internalXScale.range([0, contentWidth])\n\n      const domain = getDomain('scaleBand', values)\n      internalXScale.domain(domain)\n\n      setScaleData(prev => ({\n        ...prev,\n        [scaleKeyName]: dataKey,\n        xScale: internalXScale,\n      }))\n    }\n    if ((scaleKeyName === 'yDataKey') && dataKey) {\n      if (userYScale) {\n        userYScale.range([0, contentHeight])\n        setScaleData(prev => ({\n          ...prev,\n          yScale: userYScale,\n          yDataKey: dataKey,\n        }))\n      } else {\n        const values = data.map(d => d[dataKey])\n        internalYScale.range([0, contentHeight])\n        const domain = getDomain('scaleLinear', values)\n        internalYScale.domain(domain)\n        setScaleData(prev => ({\n          ...prev,\n          [scaleKeyName]: dataKey,\n          yScale: internalYScale,\n        }))\n      }\n    }\n    const getSeriesScaleData = (prev: ScaleData<T>) => {\n      const {\n        yDataKey,\n      } = prev\n      const prevDataKeys = prev[scaleKeyName] as string[]\n      const newDataKeys = prevDataKeys.indexOf(dataKey) > -1\n        ? prevDataKeys\n        : [...prevDataKeys, dataKey]\n      const newScaleData = {\n        ...prev,\n        [scaleKeyName]: newDataKeys,\n      }\n      const {\n        barDataKeys, lineDataKeys, circleDataKeys, areaDataKeys,\n      } = newScaleData\n\n      // TODO xScale\n      if (userYScale) {\n        userYScale.range([contentHeight, 0])\n        newScaleData.yScale = userYScale\n      } else {\n        const noneStackedValues = removeDuplicates(\n          [...lineDataKeys, ...barDataKeys, ...circleDataKeys],\n        ).reduce((acc, groupName) => {\n          acc.push(...data.map(item => +item[groupName]))\n          return acc\n        }, [])\n\n        const areaValues = data.map(\n          d => areaDataKeys.reduce((sum, key) => sum + (d[key] as any), 0),\n        )\n\n\n        const values = yDataKey\n          ? data.map(d => d[yDataKey])\n          : [...noneStackedValues, ...areaValues]\n\n        const domain = getDomain('scaleLinear', values)\n        internalYScale.domain(domain)\n        internalYScale.range([contentHeight, 0])\n        newScaleData.yScale = internalYScale\n      }\n      return newScaleData\n    }\n\n    if (scaleKeyName === 'barDataKeys') {\n      setScaleData((prev) => {\n        const newScaleData = getSeriesScaleData(prev)\n\n        const barScale = d3Scale\n          .scaleBand()\n          .domain(newScaleData[scaleKeyName] as string[])\n\n        newScaleData.barScale = barScale\n        return newScaleData\n      })\n    }\n    if (\n      (scaleKeyName === 'lineDataKeys')\n      || (scaleKeyName === 'circleDataKeys')\n      || (scaleKeyName === 'areaDataKeys')\n    ) {\n      setScaleData(prev => getSeriesScaleData(prev))\n    }\n  }, [scaleKeyName, dataKey, contentHeight, contentWidth])\n  const margin = {\n    ...value.margin,\n  }\n  const { width } = value\n  const { height } = value\n  return {\n    ...value,\n    width,\n    height,\n    contentWidth: width - margin.left - margin.right,\n    contentHeight: height - margin.top - margin.bottom,\n    options: {\n      ...(value.options),\n      ...(props.options || {}),\n    },\n    margin,\n    data: !isNil(props.data) ? props.data : value.data,\n    scaleData: value.scaleData,\n    setScaleData: value.setScaleData,\n  }\n}\n","/* eslint-disable react/no-array-index-key */\nimport * as React from 'react'\nimport { Line } from 'react-roughjs'\nimport { useChartContext } from '../hooks/useChartContext'\nimport { BaseChartComponentProps } from '../baseTypes'\nimport { isFunction, getBandWidth } from '../utils'\n\nexport interface XAxisProps extends BaseChartComponentProps {\n  dataKey: string\n  tickSize?: number\n  fontSize?: number\n  format?: (tick: string) => string\n  tickCount?: number\n}\n\nexport const XAxis: React.FC<XAxisProps> = (props) => {\n  if (!props.dataKey) {\n    throw Error('dataKey of XAxisProps is required')\n  }\n  const {\n    options, contentHeight, contentWidth, scaleData,\n  } = useChartContext(props, 'xDataKey')\n  const { xScale } = scaleData\n  const {\n    tickSize, fontSize, format, tickCount,\n  } = props\n  if (!xScale) {\n    return null\n  }\n\n  const ticks = ('ticks' in xScale) ? xScale.ticks(tickCount) : xScale.domain()\n  const bandwidth = getBandWidth(xScale)\n  const y = contentHeight\n  return (\n    <React.Fragment>\n      <Line\n        x1={0}\n        y1={y}\n        x2={contentWidth + bandwidth / 2}\n        y2={y}\n        options={{\n          bowing: 0.2,\n          ...options,\n        }}\n      />\n      {\n        ticks.map((t, index) => (\n          <React.Fragment\n            key={index}\n          >\n            <Line\n              x1={xScale(t) + bandwidth / 2}\n              y1={y}\n              x2={xScale(t) + bandwidth / 2}\n              y2={y + tickSize}\n              options={{\n                strokeWidth: 2,\n                ...options,\n              }}\n            />\n            <text\n              x={xScale(t) + bandwidth / 2}\n              y={y + tickSize + fontSize}\n              stroke={options.stroke}\n              fill={options.stroke}\n              textAnchor=\"middle\"\n            >\n              {isFunction(format) ? format(t) : String(t)}\n            </text>\n          </React.Fragment>\n        ))\n      }\n    </React.Fragment>\n  )\n}\n\nXAxis.displayName = 'XAxis'\nXAxis.defaultProps = {\n  tickSize: 10,\n  fontSize: 16,\n  tickCount: 10,\n}\n\nexport default XAxis\n","/* eslint-disable react/no-array-index-key */\nimport * as React from 'react'\nimport { Line } from 'react-roughjs'\nimport { useChartContext } from '../hooks/useChartContext'\nimport { BaseChartComponentProps } from '../baseTypes'\nimport { isFunction } from '../utils'\n\nexport interface YAxisProps extends BaseChartComponentProps {\n  dataKey?: string\n  tickSize?: number\n  tickCount?: number\n  fontSize?: number\n  format?: (tick: string) => string\n}\n\nexport const YAxis: React.FC<YAxisProps> = (props) => {\n  const {\n    tickSize, fontSize, format, tickCount,\n  } = props\n  const {\n    options, contentHeight, scaleData,\n  } = useChartContext(props, 'yDataKey')\n  const { yScale: scale } = scaleData\n  if (!scale) {\n    return null\n  }\n\n  const ticks = (scale as any).ticks ? (scale as any).ticks(tickCount) : scale.domain()\n  return (\n    <React.Fragment>\n      <Line\n        x1={0}\n        y1={0}\n        x2={0}\n        y2={contentHeight}\n        options={{\n          bowing: 0.2,\n          ...options,\n        }}\n      />\n      {\n        ticks.map((t, index) => (\n          <React.Fragment\n            key={index}\n          >\n            <Line\n              x1={0 - tickSize}\n              x2={0}\n              y1={scale(t)}\n              y2={scale(t)}\n              options={{\n                strokeWidth: 2,\n                ...options,\n              }}\n            />\n            <text\n              x={0 - tickSize}\n              y={scale(t) + fontSize / 3}\n              stroke={options.stroke}\n              fill={options.stroke}\n              textAnchor=\"end\"\n            >\n              {isFunction(format) ? format(t) : String(t)}\n            </text>\n          </React.Fragment>\n        ))\n      }\n    </React.Fragment>\n  )\n}\n\nYAxis.displayName = 'YAxis'\nYAxis.defaultProps = {\n  tickSize: 10,\n  fontSize: 16,\n  tickCount: 10,\n}\n\nexport default YAxis\n","import { useChartContext } from './useChartContext'\n\n// https://stackoverflow.com/questions/6307307/click-mouse-position-with-scroll-in-javascript\n\nconst mousePositions = (event) => {\n  const IE = !!document.all\n  let x\n  let y\n\n  if (IE) {\n    x = event.clientX + document.body.scrollLeft\n    y = event.clientY + document.body.scrollTop\n  } else {\n    x = ((window as any).Event)\n      ? event.pageX\n      : event.clientX + (\n        document.documentElement.scrollLeft\n          ? document.documentElement.scrollLeft\n          : document.body.scrollLeft\n      )\n    y = ((window as any).Event)\n      ? event.pageY\n      : event.clientY + (\n        document.documentElement.scrollTop\n          ? document.documentElement.scrollTop\n          : document.body.scrollTop\n      )\n  }\n  return { x, y }\n}\nexport const useTooltipGenerator = (props: {\n  dataKey: string\n  [key: string]: any\n}) => {\n  const { dataKey } = props\n  if (!dataKey) {\n    throw Error('dataKey is Required!')\n  }\n  const { setTooltipData } = useChartContext(props as any)\n  const generateHandlers = (\n    item,\n    content: { name: string, value: string } = { name: '', value: '' },\n  ) => ({\n    onMouseOver: (e) => {\n      const { x, y } = mousePositions(e)\n      setTooltipData(prev => ({\n        ...prev,\n        showToolTip: true,\n        x,\n        y,\n        name: content.name,\n        value: content.value,\n        activeItem: item,\n      }))\n    },\n    onMouseMove: (e) => {\n      const { x, y } = mousePositions(e)\n      setTooltipData(prev => ({\n        ...prev,\n        showToolTip: true,\n        x,\n        y,\n        activeItem: item,\n      }))\n    },\n    onMouseOut: () => {\n      setTooltipData(prev => ({\n        ...prev,\n        showToolTip: false,\n      }))\n    },\n  })\n  return {\n    generateHandlers,\n  }\n}\n","/* eslint-disable react/no-array-index-key */\nimport * as React from 'react'\nimport { Rectangle, RectangleProps } from 'react-roughjs'\nimport { useChartContext } from '../hooks/useChartContext'\nimport { BaseChartComponentProps } from '../baseTypes'\nimport { isFunction, getBandWidth, processTooltipHandlers } from '../utils'\nimport { useTooltipGenerator } from '../hooks/useTooltipGenerator'\n\nexport interface BarSeriesProps<T extends object> extends BaseChartComponentProps {\n  dataKey: string,\n  /** Use for handling event and rendering customized shapes/styles */\n  children?: (item: T, props: RectangleProps, index: number) => JSX.Element\n}\n\nexport const BarSeries  = <T extends object>(props: BarSeriesProps<T>) => { // eslint-disable-line\n  const {\n    dataKey, options,\n  } = props\n  const {\n    data, contentHeight, scaleData,\n  } = useChartContext(props, 'barDataKeys')\n  const {\n    xScale, barScale, yScale, xDataKey,\n  } = scaleData\n  const { generateHandlers } = useTooltipGenerator(props)\n  if (!dataKey) {\n    throw Error('dataKey is Required!')\n  }\n  // TODO xDataKey\n  if (!xScale || !barScale || !yScale || !xDataKey) {\n    return null\n  }\n\n  const width = getBandWidth(xScale)\n  const offset = (width * 0.2) / 2\n  const generateChildProps = (item:T) => {\n    const x = xScale(item[xDataKey])\n    barScale\n      .range([x + offset, x + width - offset])\n    const min = yScale.domain()[0]\n    const y0 = yScale(0)\n    const itemY = yScale(item[dataKey])\n    const y = min >= 0 ? itemY : yScale(Math.max(item[dataKey], 0))\n    const height = min >= 0 ? contentHeight - itemY : Math.abs(y0 - itemY)\n    return {\n      x: barScale(dataKey),\n      y,\n      width: barScale.bandwidth(),\n      height,\n      options: {\n        fill: 'black',\n        ...options,\n      },\n    }\n  }\n  const { children } = props\n  return (\n    <React.Fragment>\n      {\n        data.map((item, index) => {\n          const handlers = generateHandlers(item, {\n            name: `${dataKey}`,\n            value: `${item[dataKey]}`,\n          })\n          const childProps = generateChildProps(item as T)\n          return isFunction(children)\n            ? processTooltipHandlers(children(item as T, childProps, index), handlers) : (\n              <Rectangle\n                key={index}\n                {...childProps}\n                {...handlers}\n              />\n            )\n        })\n      }\n    </React.Fragment>\n  )\n}\n\nBarSeries.displayName = 'BarSeries'\n\n\nexport default BarSeries\n","import * as React from 'react'\nimport { Path, PathProps } from 'react-roughjs'\nimport * as d3Shape from 'd3-shape'\n\nexport interface ArcProps extends Omit<PathProps, 'd'> {\n  innerRadius?: number\n  outerRadius?: number\n  startAngle?: number\n  endAngle?: number\n  padAngle?: number\n  cx?: number\n  cy?: number\n}\n\nexport const Arc: React.FC<ArcProps> = (props) => {\n  const {\n    innerRadius, outerRadius,\n    startAngle, endAngle, padAngle, options,\n    cx, cy, ...rest\n  } = props\n  const a = d3Shape.arc()\n  const d = a({\n    innerRadius,\n    outerRadius,\n    startAngle,\n    endAngle,\n    padAngle,\n  })\n  return (\n    <Path\n      d={d}\n      transform={`translate(${cx}, ${cy})`}\n      options={options}\n      {...rest}\n    />\n  )\n}\n\nArc.displayName = 'RcArc'\nArc.defaultProps = {\n  innerRadius: 0,\n  outerRadius: 0,\n  startAngle: 0,\n}\n\nexport default Arc\n","/* eslint-disable react/no-array-index-key */\nimport * as React from 'react'\nimport * as d3Shape from 'd3-shape'\nimport { useChartContext } from '../hooks/useChartContext'\nimport { BaseChartComponentProps } from '../baseTypes'\nimport {\n  isNil, isFunction, processTooltipHandlers,\n} from '../utils'\nimport { Arc, ArcProps } from './Arc'\n\nimport { useTooltipGenerator } from '../hooks/useTooltipGenerator'\n\n\nexport interface ArcSeriesProps<T> extends BaseChartComponentProps {\n  dataKey: string\n  innerRadiusPercent?:number\n  outerRadiusPercent?:number\n  cx?: number\n  cy?: number\n  padAngle?: number\n  startAngle?: number\n  /** Default is Math.PI * 2 */\n  endAngle?: number\n  children?: (item: T, props: ArcProps, index: number) => React.ReactNode\n}\n\nexport const ArcSeries = <T extends object>(props: ArcSeriesProps<T>) => { // eslint-disable-line\n  const {\n    data, options, contentHeight, contentWidth,\n  } = useChartContext(props)\n  const { generateHandlers } = useTooltipGenerator(props)\n  const {\n    dataKey, cx, cy, innerRadiusPercent, outerRadiusPercent,\n    padAngle: padAngleProp,\n    startAngle: startAngleProp,\n    endAngle: endAngleProp, children,\n  } = props\n  const newCx = !isNil(cx) ? cx : contentWidth / 2\n  const newCy = !isNil(cy) ? cy : contentHeight / 2\n  const radius = Math.min(newCx, newCy)\n\n  const arcs = d3Shape.pie()\n    .startAngle(startAngleProp)\n    .padAngle(padAngleProp)\n    .endAngle(endAngleProp)(data.map(d => d[dataKey]))\n  const arcsData = arcs.map((arc) => {\n    const { startAngle, endAngle, padAngle } = arc\n    return {\n      innerRadius: radius * innerRadiusPercent,\n      outerRadius: radius * outerRadiusPercent,\n      startAngle,\n      endAngle,\n      padAngle,\n    }\n  })\n  const total: number = data.reduce((acc, d) => acc + d[dataKey], 0)\n  return (\n    <React.Fragment>\n      {arcsData.map((arcProps, index) => {\n        const item = data[index]\n        const percent = ((item[dataKey] / total) * 100).toPrecision(3)\n        const handlers = generateHandlers(item, {\n          name: `${dataKey} ${item[dataKey]}`,\n          value: `${percent}%`,\n        })\n        const childProps: ArcProps = {\n          ...arcProps,\n          cx: newCx,\n          cy: newCy,\n          options: {\n            fill: 'black',\n            ...options,\n          },\n        }\n        if (isFunction(children)) {\n          return processTooltipHandlers(children(item, childProps, index), handlers)\n        }\n        return (\n          <Arc\n            key={index}\n            {...childProps}\n            {...handlers}\n          />\n        )\n      })}\n    </React.Fragment>\n  )\n}\n\nArcSeries.displayName = 'ArcSeries'\nArcSeries.defaultProps = {\n  innerRadiusPercent: 0,\n  outerRadiusPercent: 1,\n  padAngle: 0,\n  startAngle: 0,\n  endAngle: Math.PI * 2,\n}\n\nexport default ArcSeries\n","import * as React from 'react'\nimport { Line } from 'react-roughjs'\nimport { BaseChartComponentProps } from '../baseTypes'\nimport { useChartContext } from '../hooks/useChartContext'\n\nexport interface Y0Props extends BaseChartComponentProps {\n\n}\n\nexport const Y0: React.FC<Y0Props> = (props) => {\n  const { scaleData: { yScale }, contentWidth } = useChartContext(props)\n  if (!yScale) {\n    return null\n  }\n  return (\n    <Line\n      y1={yScale(0)}\n      y2={yScale(0)}\n      x1={0}\n      x2={contentWidth}\n      strokeDasharray=\"30\"\n      options={{\n        bowing: 0.2,\n        ...props.options,\n      }}\n    />\n  )\n}\n\nY0.displayName = 'Y0'\n\nexport default Y0\n","/* eslint-disable react/no-array-index-key */\nimport * as React from 'react'\nimport { Circle, CircleProps } from 'react-roughjs'\nimport { BaseChartComponentProps } from '../baseTypes'\nimport { useChartContext } from '../hooks/useChartContext'\nimport { getBandWidth, isFunction, processTooltipHandlers } from '../utils'\nimport { useTooltipGenerator } from '../hooks/useTooltipGenerator'\n\n\nexport interface CircleSeriesProps<T extends object> extends BaseChartComponentProps {\n  dataKey: keyof T,\n  children?: (item: T, props: CircleProps, index: number) => React.ReactNode\n}\n\n\nexport const CircleSeries = <T extends object>(props: CircleSeriesProps<T>) => { // eslint-disable-line\n  const { scaleData, data, options } = useChartContext(props, 'circleDataKeys')\n  const {\n    xScale, yScale, xDataKey,\n  } = scaleData\n  const { dataKey } = props\n  const { generateHandlers } = useTooltipGenerator(props as any)\n  if (!xScale || !yScale || !dataKey || !xDataKey) {\n    return null\n  }\n\n  const bandwidth = getBandWidth(xScale)\n  const points: [number, number][] = data.map((item: any) => ([\n    xScale(item[xDataKey]),\n    yScale(item[dataKey]),\n  ]))\n  const { children } = props\n  return (\n    <React.Fragment>\n      {points.map(([x, y], index) => {\n        const childProps: CircleProps = {\n          x: x + bandwidth / 2,\n          y,\n          diameter: 10,\n          options: {\n            ...options,\n          },\n        }\n        const item = data[index] as T\n        const handlers = generateHandlers(data[index], {\n          name: `${item[xDataKey]} ${dataKey}`,\n          value: `${item[dataKey]}`,\n        })\n        if (isFunction(children)) {\n          return processTooltipHandlers(children(data[index] as T, childProps, index), handlers)\n        }\n        return (\n          <Circle\n            key={index}\n            {...childProps}\n            {...handlers}\n          />\n        )\n      })}\n    </React.Fragment>\n  )\n}\n\nCircleSeries.displayName = 'CircleSeries'\n\nexport default CircleSeries\n","/* eslint-disable react/no-array-index-key */\nimport * as React from 'react'\nimport * as d3Shape from 'd3-shape'\nimport { Path, CircleProps } from 'react-roughjs'\nimport { BaseChartComponentProps, Curve } from '../baseTypes'\nimport { useChartContext } from '../hooks/useChartContext'\nimport { getBandWidth } from '../utils'\nimport { CircleSeries } from './CircleSeries'\n\n\nexport interface LineSeriesProps<T extends object> extends BaseChartComponentProps {\n  dataKey: keyof T\n  curve?: Curve\n  children?: (item: T, props: CircleProps, index: number) => React.ReactNode\n}\n\n\nexport const LineSeries = <T extends object>(props: LineSeriesProps<T>) => { // eslint-disable-line\n  const { scaleData, data, options } = useChartContext(props, 'lineDataKeys')\n  const { xScale, yScale, xDataKey } = scaleData\n  const { dataKey, curve } = props\n  if (!xScale || !yScale || !dataKey || !xDataKey) {\n    return null\n  }\n\n  const bandwidth = getBandWidth(xScale)\n  const points: [number, number][] = data.map((item: any) => ([\n    xScale(item[xDataKey]),\n    yScale(item[dataKey]),\n  ]))\n\n  const line = d3Shape\n    .line()\n    .curve(curve)\n\n  const path = line(points)\n  return (\n    <React.Fragment>\n      <Path\n        transform={`translate(${bandwidth / 2}, 0)`}\n        d={path}\n        options={options}\n      />\n      <CircleSeries\n        {...props}\n      />\n    </React.Fragment>\n  )\n}\n\nLineSeries.displayName = 'LineSeries'\n\nLineSeries.defaultProps = {\n  curve: d3Shape.curveCardinal.tension(0.5),\n}\n\nexport default LineSeries\n","import * as React from 'react'\nimport * as ReactDOM from 'react-dom'\nimport { RoughProvider, Rectangle } from 'react-roughjs'\nimport { BaseChartComponentProps } from '../baseTypes'\nimport { useChartContext } from '../hooks/useChartContext'\nimport { isNil, isFunction } from '../utils'\n\nexport interface TooltipProps<T=any> extends Omit<BaseChartComponentProps, 'data'>{\n  width?:number,\n  height?: number\n  fontSize?: number,\n  /** Use for rendering customized content */\n  children?: (activeItem: T) => React.ReactNode\n}\n\n\nexport const Tooltip: React.FC<TooltipProps> = (props) => {\n  const {\n    tooltipData, setTooltipData, contentWidth, options,\n  } = useChartContext(props)\n  const {\n    x, y, showToolTip, name, value, activeItem,\n  } = tooltipData\n  const {\n    width: propsWidth, height, fontSize, children,\n  } = props\n  const [internalWidth, setWidth] = React.useState(120)\n  const textRef = React.useRef<SVGTextElement>()\n  const width = isNil(propsWidth) ? internalWidth : propsWidth\n  React.useEffect(() => {\n    const node = textRef.current\n    if (node) {\n      const { width: textWidth } = node.getBBox()\n      setWidth(textWidth + 30)\n    }\n  }, [textRef.current])\n  if (!showToolTip || !activeItem) {\n    return null\n  }\n  // TODO pintX pointY\n  const left = contentWidth - x < width + 20 ? x - 20 - width : x + 20\n  const ellipse = (s = '', length) => (s.length > length ? `${s.slice(0, length)}...` : s)\n  const renderChildren = () => {\n    const text = (s: string) => (\n      <text\n        ref={textRef}\n        textAnchor=\"middle\"\n        stroke=\"black\"\n        fill=\"black\"\n        x={width / 2}\n        y={height / 2 + fontSize / 3}\n      >\n        {s}\n      </text>\n    )\n\n    if (isFunction(children)) {\n      const content = children(activeItem)\n      return typeof content === 'string' ? text(content) : content\n    }\n    return text(`${ellipse(name, 20)}: ${ellipse(value, 5)}`)\n  }\n  const content = (\n    <div\n      style={{\n        position: 'absolute',\n        left,\n        top: y - height / 2,\n      }}\n    >\n      <svg\n        width={width + 4}\n        height={height + 4}\n      >\n        <g transform=\"translate(2, 2)\">\n          <RoughProvider>\n            <Rectangle\n              width={width}\n              height={height}\n              onMouseOver={(e) => {\n                setTooltipData(prev => ({\n                  ...prev,\n                  x: e.clientX,\n                  y: e.clientY,\n                }))\n              }}\n              onMouseMove={(e) => {\n                setTooltipData(prev => ({\n                  ...prev,\n                  x: e.clientX,\n                  y: e.clientY,\n                }))\n              }}\n              onMouseOut={() => {\n                setTooltipData(prev => ({\n                  ...prev,\n                  showToolTip: false,\n                }))\n              }}\n              options={{\n                fill: 'white',\n                fillStyle: 'solid',\n                strokeWidth: 2,\n                ...options,\n              }}\n            />\n          </RoughProvider>\n          <RoughProvider>\n            {renderChildren()}\n          </RoughProvider>\n        </g>\n      </svg>\n    </div>\n  )\n\n  return ReactDOM.createPortal(content, document.body)\n}\n\nTooltip.displayName = 'Tooltip'\nTooltip.defaultProps = {\n  height: 40,\n  fontSize: 16,\n}\n\nexport default Tooltip\n","import * as React from 'react'\nimport { RoughProvider } from 'react-roughjs'\nimport * as d3Scale from 'd3-scale'\nimport {\n  ChartContext, ChartContextArgument, ScaleData, TooltipData,\n} from '../ChartContext'\nimport { isNil } from '../utils'\n\nconst { Provider } = ChartContext\nconst defaultMargin = {\n  top: 10, right: 10, bottom: 50, left: 50,\n}\n\nexport interface ChartProviderProps extends ChartContextArgument {\n}\n\nexport const ChartProvider: React.FC<ChartProviderProps> = (props) => {\n  const [innerHeight, setInnerHeight] = React.useState(0)\n  const [innerWidth, setInnerWidth] = React.useState(0)\n  const ref = React.useRef<SVGSVGElement>()\n  const internalXScale = d3Scale.scaleBand()\n  const internalYScale = d3Scale.scaleLinear()\n  const [scaleData, setScaleData] = React.useState<ScaleData<any>>({\n    barDataKeys: [],\n    lineDataKeys: [],\n    circleDataKeys: [],\n    areaDataKeys: [],\n    xScale: props.xScale || internalXScale,\n    yScale: props.yScale || internalYScale,\n    userXScale: props.xScale,\n    userYScale: props.yScale,\n    internalXScale,\n    internalYScale,\n  })\n  const [tooltipData, setTooltipData] = React.useState<TooltipData>({\n    x: -1,\n    y: -1,\n    showToolTip: false,\n    name: '',\n    value: '',\n    activeItem: null,\n  })\n\n\n  React.useEffect(() => {\n    const handleResize = () => {\n      if (ref.current && (isNil(props.height) || isNil(props.width))) {\n        const boundingRect = ref.current.parentElement.getBoundingClientRect()\n        setInnerHeight(boundingRect.height)\n        setInnerWidth(boundingRect.width)\n      }\n    }\n    handleResize()\n    window.addEventListener('resize', handleResize)\n    return () => window.removeEventListener('resize', handleResize)\n  }, [props.height, props.width, ref.current])\n\n\n  const height = !isNil(props.height) ? props.height : innerHeight\n  const width = !isNil(props.width) ? props.width : innerWidth\n\n  const { margin: propsMargin } = props\n  const margin = {\n    ...defaultMargin,\n    ...propsMargin,\n  }\n  const shouldRenderChildren = () => (height && width)\n  return (\n    <Provider\n      value={{\n        ...props as any,\n        height,\n        width,\n        margin,\n        scaleData,\n        setScaleData: f => setScaleData(f),\n        contentHeight: height - margin.bottom - margin.top,\n        contentWidth: width - margin.left - margin.right,\n        tooltipData,\n        setTooltipData: f => setTooltipData(f),\n      }}\n    >\n      <svg\n        height={height}\n        width={width}\n        ref={ref}\n      >\n        <RoughProvider\n          transform={`translate(${margin.left}, ${margin.top})`}\n          config={{\n            options: props.options,\n          }}\n        >\n          {shouldRenderChildren() && props.children}\n        </RoughProvider>\n      </svg>\n    </Provider>\n  )\n}\n\nChartProvider.displayName = 'ChartProvider'\nChartProvider.defaultProps = {\n  data: [],\n  options: {},\n  margin: defaultMargin,\n}\n\nexport default RoughProvider\n","/* eslint-disable react/no-array-index-key */\nimport * as React from 'react'\nimport * as d3Shape from 'd3-shape'\nimport { Path, CircleProps, Circle } from 'react-roughjs'\nimport { BaseChartComponentProps, Curve } from '../baseTypes'\nimport { useChartContext } from '../hooks/useChartContext'\nimport { getBandWidth, isFunction, processTooltipHandlers } from '../utils'\nimport { useTooltipGenerator } from '../hooks/useTooltipGenerator'\n\n\nexport interface AreaSeriesProps<T extends object> extends BaseChartComponentProps {\n  dataKey: keyof T\n  curve?: Curve\n  padding?: number\n  /** For rendering customized vertex */\n  children?: (item: T, props: CircleProps, index: number) => React.ReactNode\n}\n\n\nexport const AreaSeries = <T extends object>(props: AreaSeriesProps<T>) => { // eslint-disable-line\n  const {\n    scaleData, data, options,\n  } = useChartContext(props, 'areaDataKeys')\n  const {\n    xScale, yScale, xDataKey, areaDataKeys,\n  } = scaleData\n  const {\n    dataKey, curve, children, padding,\n  } = props\n  const { generateHandlers } = useTooltipGenerator(props as any)\n\n  if (!xScale || !yScale || !dataKey || !xDataKey) {\n    return null\n  }\n  const areaKeyIndex = areaDataKeys.indexOf(dataKey)\n  const calculateY = (d) => {\n    if (areaKeyIndex === 0) {\n      return {\n        y0: yScale(yScale.domain()[0]),\n        y1: yScale(d[dataKey]),\n      }\n    }\n    const sum = (keys = []) => keys.reduce((acc, key) => acc + d[key], 0)\n    return {\n      y0: yScale(sum(areaDataKeys.slice(0, areaKeyIndex))) - padding,\n      y1: yScale(sum(areaDataKeys.slice(0, areaKeyIndex + 1))),\n    }\n  }\n  const bandwidth = getBandWidth(xScale)\n  interface Position {\n    x: number\n    y0: number\n    y1: number\n  }\n  const positions: Position[] = data.map((item: any) => {\n    const { y0, y1 } = calculateY(item)\n    return {\n      x: xScale(item[xDataKey]),\n      y0,\n      y1,\n    }\n  })\n  const area = d3Shape.area<Position>()\n    .x(d => d.x)\n    .y1(d => d.y1)\n    .y0(d => d.y0)\n    .curve(curve as any)\n  const areaPath = area(positions)\n  return (\n    <React.Fragment>\n      <Path\n        transform={`translate(${bandwidth / 2}, 0)`}\n        d={areaPath}\n        options={{\n          fill: options.stroke,\n          ...options,\n        }}\n      />\n      {positions.map(({ x, y1 }, index) => {\n        const childProps: CircleProps = {\n          x: x + bandwidth / 2,\n          y: y1,\n          diameter: 12,\n          options: {\n            fill: options.fill || options.stroke,\n            strokeWidth: 2,\n            fillStyle: 'solid',\n            stroke: 'white',\n          },\n        }\n        const item = data[index] as T\n        const handlers = generateHandlers(data[index], {\n          name: `${item[xDataKey]} ${dataKey}`,\n          value: `${item[dataKey]}`,\n        })\n        if (isFunction(children)) {\n          return processTooltipHandlers(children(data[index] as T, childProps, index), handlers)\n        }\n        return (\n          <Circle\n            key={index}\n            {...childProps}\n            {...handlers}\n          />\n        )\n      })}\n    </React.Fragment>\n  )\n}\n\nAreaSeries.displayName = 'LineSeries'\n\nAreaSeries.defaultProps = {\n  curve: d3Shape.curveCardinal.tension(0.5),\n  padding: 6,\n}\n\nexport default AreaSeries\n"],"names":["const","ChartContext","React","isNil","x","isFunction","removeDuplicates","xs","res","forEach","key","Object","keys","getBandWidth","scale","ticks","domain","length","range","low","high","Math","abs","processTooltipHandlers","child","handlers","additionalProps","entries","reduce","acc","f","props","handlerName","e","getDomain","type","values","min","max","useChartContext","scaleKeyName","value","Error","contentWidth","contentHeight","setScaleData","scaleData","userYScale","internalXScale","internalYScale","dataKey","userXScale","prev","xScale","xDataKey","data","map","d","yScale","yDataKey","getSeriesScaleData","prevDataKeys","newDataKeys","indexOf","newScaleData","lineDataKeys","circleDataKeys","areaDataKeys","noneStackedValues","barDataKeys","groupName","push","item","areaValues","sum","barScale","d3Scale","margin","width","height","left","right","top","bottom","options","XAxis","fontSize","format","tickCount","bandwidth","y","Line","x1","y1","x2","y2","bowing","t","index","tickSize","strokeWidth","stroke","fill","textAnchor","String","displayName","defaultProps","YAxis","mousePositions","event","IE","document","all","clientX","body","scrollLeft","clientY","scrollTop","window","Event","pageX","documentElement","pageY","useTooltipGenerator","setTooltipData","generateHandlers","content","name","onMouseOver","showToolTip","activeItem","onMouseMove","onMouseOut","BarSeries","offset","generateChildProps","y0","itemY","children","childProps","Rectangle","Arc","outerRadius","startAngle","endAngle","padAngle","cx","cy","rest","a","d3Shape","innerRadius","Path","transform","ArcSeries","innerRadiusPercent","outerRadiusPercent","padAngleProp","startAngleProp","endAngleProp","newCx","newCy","radius","arcs","arcsData","arc","total","arcProps","percent","toPrecision","PI","Y0","strokeDasharray","CircleSeries","points","diameter","Circle","LineSeries","curve","line","path","tension","Tooltip","tooltipData","internalWidth","setWidth","textRef","propsWidth","node","current","getBBox","textWidth","ellipse","s","slice","renderChildren","text","ref","style","position","RoughProvider","fillStyle","ReactDOM","Provider","defaultMargin","ChartProvider","innerHeight","setInnerHeight","innerWidth","setInnerWidth","handleResize","boundingRect","parentElement","getBoundingClientRect","addEventListener","removeEventListener","propsMargin","shouldRenderChildren","config","AreaSeries","padding","areaKeyIndex","calculateY","positions","area","areaPath"],"mappings":"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"}